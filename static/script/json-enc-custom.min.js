function encodingAlgorithm(e){let t=Object.create(null);const n=Object.keys(e),l=Object.values(e),r=n.length;for(let e=0;e<r;e++){let r=n[e],i=l[e],y=JSONEncodingPath(r),o=t;for(let e=0;e<y.length;e++){o=setValueFromPath(o,y[e],i)}}return JSON.stringify(t)}function JSONEncodingPath(e){let t=e;const n=[{type:"object",key:t,last:!0,next_type:null}];let l=Array(),r=String();for(let e=0;e<t.length&&"["!==t[e];e++)r+=t[e];if(""===r)return n;for(t=t.slice(r.length),l.push({type:"object",key:r,last:!1,next_type:null});t.length;)if(/^\[\d+\]/.test(t)){t=t.slice(1);let e=t.match(/\d+/)[0];t=t.slice(e.length);let n=parseInt(e,10);t=t.slice(1),l.push({type:"array",key:n,last:!1,next_type:null})}else{if(!/^\[[^\]]+\]/.test(t))return n;{t=t.slice(1);let e=t.match(/[^\]]+/)[0];t=t.slice(e.length);let n=e;t=t.slice(1),l.push({type:"object",key:n,last:!1,next_type:null})}}for(let e=0;e<l.length;e++)if(e===l.length-1){let t=l[e];t.last=!0,l[e]=t}else{let t=l[e];t.next_type=l[e+1].type,l[e]=t}return l}function setValueFromPath(e,t,n){if(t.last&&(e[t.key]=n),void 0!==e[t.key])return e[t.key];if("object"===t.type){if("object"===t.next_type)return e[t.key]={},e[t.key];if("array"===t.next_type)return e[t.key]=[],e[t.key]}if("array"===t.type){if("object"===t.next_type)return e[t.key]={},e[t.key];if("array"===t.next_type)return e[t.key]=[],e[t.key]}}htmx.defineExtension("json-enc-custom",{onEvent:function(e,t){"htmx:configRequest"===e&&(t.detail.headers["Content-Type"]="application/json")},encodeParameters:function(e,t,n){return e.overrideMimeType("text/json"),encodingAlgorithm(t)}});